import { useState, useEffect } from 'react'
import { useTheme } from "next-themes"
import { getClasses } from 'utils/getClasses';
import s from './ThemePicker.module.css'

const ThemePicker = () => {
  const [mounted, setMounted] = useState(false)
  const { theme, setTheme } = useTheme()

  useEffect(() => {
    setMounted(true)
  }, [])

  if (!mounted) {
    return null
  }

  const lightClasses = getClasses([
    s.themeButton,
    theme === 'light' ? s.current : null
  ])

  const darkClasses = getClasses([
    s.themeButton,
    theme === 'dark' ? s.current : null
  ])

  const systemClasses = getClasses([
    s.themeButton,
    theme === 'system' ? s.current : null
  ])

  return (
    <div className={s.themePicker}>
      <button
        onClick={() => setTheme('light')}
        className={lightClasses}
        aria-label='Toggle light theme'
      >
        <svg className={s.themeIcon} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fillRule="evenodd" clipRule="evenodd" d="M8.64124 8.64124C9.53204 7.75044 10.7402 7.25 12 7.25C13.2598 7.25 14.468 7.75044 15.3588 8.64124C16.2496 9.53204 16.75 10.7402 16.75 12C16.75 13.2598 16.2496 14.468 15.3588 15.3588C14.468 16.2496 13.2598 16.75 12 16.75C10.7402 16.75 9.53204 16.2496 8.64124 15.3588C7.75044 14.468 7.25 13.2598 7.25 12C7.25 10.7402 7.75044 9.53204 8.64124 8.64124ZM12 8.75C11.138 8.75 10.3114 9.09241 9.7019 9.7019C9.09241 10.3114 8.75 11.138 8.75 12C8.75 12.862 9.09241 13.6886 9.7019 14.2981C10.3114 14.9076 11.138 15.25 12 15.25C12.862 15.25 13.6886 14.9076 14.2981 14.2981C14.9076 13.6886 15.25 12.862 15.25 12C15.25 11.138 14.9076 10.3114 14.2981 9.7019C13.6886 9.09241 12.862 8.75 12 8.75Z" />
          <path fillRule="evenodd" clipRule="evenodd" d="M12 2.25C12.4142 2.25 12.75 2.58579 12.75 3V4C12.75 4.41421 12.4142 4.75 12 4.75C11.5858 4.75 11.25 4.41421 11.25 4V3C11.25 2.58579 11.5858 2.25 12 2.25ZM5.06967 5.06967C5.36256 4.77678 5.83744 4.77678 6.13033 5.06967L6.83033 5.76967C7.12322 6.06256 7.12322 6.53744 6.83033 6.83033C6.53744 7.12322 6.06256 7.12322 5.76967 6.83033L5.06967 6.13033C4.77678 5.83744 4.77678 5.36256 5.06967 5.06967ZM18.9303 5.06967C19.2232 5.36256 19.2232 5.83744 18.9303 6.13033L18.2303 6.83033C17.9374 7.12322 17.4626 7.12322 17.1697 6.83033C16.8768 6.53744 16.8768 6.06256 17.1697 5.76967L17.8697 5.06967C18.1626 4.77678 18.6374 4.77678 18.9303 5.06967ZM2.25 12C2.25 11.5858 2.58579 11.25 3 11.25H4C4.41421 11.25 4.75 11.5858 4.75 12C4.75 12.4142 4.41421 12.75 4 12.75H3C2.58579 12.75 2.25 12.4142 2.25 12ZM19.25 12C19.25 11.5858 19.5858 11.25 20 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H20C19.5858 12.75 19.25 12.4142 19.25 12ZM6.83033 17.1697C7.12322 17.4626 7.12322 17.9374 6.83033 18.2303L6.13033 18.9303C5.83744 19.2232 5.36256 19.2232 5.06967 18.9303C4.77678 18.6374 4.77678 18.1626 5.06967 17.8697L5.76967 17.1697C6.06256 16.8768 6.53744 16.8768 6.83033 17.1697ZM17.1697 17.1697C17.4626 16.8768 17.9374 16.8768 18.2303 17.1697L18.9303 17.8697C19.2232 18.1626 19.2232 18.6374 18.9303 18.9303C18.6374 19.2232 18.1626 19.2232 17.8697 18.9303L17.1697 18.2303C16.8768 17.9374 16.8768 17.4626 17.1697 17.1697ZM12 19.25C12.4142 19.25 12.75 19.5858 12.75 20V21C12.75 21.4142 12.4142 21.75 12 21.75C11.5858 21.75 11.25 21.4142 11.25 21V20C11.25 19.5858 11.5858 19.25 12 19.25Z" />
        </svg>
        <span className={s.buttonText}>Light theme</span>
      </button>
      <button
        className={darkClasses}
        onClick={() => setTheme('dark')}
        aria-label='Toggle dark theme'
      >
        <svg className={s.themeIcon} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fillRule="evenodd" clipRule="evenodd" d="M10.6804 3.84848C9.65205 4.01537 8.66055 4.3762 7.76016 4.91595C6.47921 5.68383 5.43073 6.78503 4.72655 8.10208C4.02238 9.41913 3.68893 10.9026 3.76177 12.3943C3.83462 13.886 4.31102 15.33 5.14017 16.5722C5.96932 17.8143 7.1201 18.8081 8.46978 19.4476C9.81945 20.087 11.3174 20.348 12.8038 20.2029C14.2902 20.0577 15.7093 19.5118 16.9098 18.6234C17.6564 18.0708 18.301 17.3987 18.8196 16.6376C17.5447 16.8445 16.2302 16.7506 14.9838 16.3517C13.1466 15.7639 11.5734 14.5508 10.5378 12.9233C9.50214 11.2959 9.06955 9.35698 9.31518 7.44366C9.48178 6.1459 9.95328 4.91555 10.6804 3.84848ZM12.1094 2.24994H12.3928C12.7011 2.24994 12.9781 2.43868 13.0908 2.72569C13.2036 3.01269 13.1292 3.33947 12.9033 3.54937C11.7471 4.6237 11.0039 6.06923 10.803 7.63467C10.602 9.2001 10.9559 10.7865 11.8033 12.118C12.6506 13.4496 13.9377 14.4421 15.4409 14.9231C16.9442 15.4041 18.5684 15.3431 20.0313 14.7508C20.3116 14.6373 20.6327 14.7032 20.8455 14.918C21.0584 15.1329 21.1214 15.4545 21.0054 15.7338C20.328 17.3636 19.2209 18.7791 17.8021 19.8291C16.3834 20.8791 14.7062 21.5242 12.9496 21.6958C11.1929 21.8673 9.42263 21.5588 7.82756 20.8031C6.23249 20.0474 4.87247 18.873 3.89257 17.4049C2.91267 15.9369 2.34965 14.2304 2.26356 12.4675C2.17747 10.7046 2.57155 8.95135 3.40375 7.39483C4.23596 5.83832 5.47508 4.5369 6.98893 3.6294C8.50278 2.72191 10.2346 2.24237 11.9996 2.24194C12.0365 2.24193 12.0734 2.24464 12.1094 2.24994Z" />
        </svg>
        <span className={s.buttonText}>Dark theme</span>
      </button>
      <button
        className={systemClasses}
        onClick={() => setTheme('system')}
        aria-label='Toggle dark theme'
      >
        <svg className={s.themeIcon} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fillRule="evenodd" clipRule="evenodd" d="M4 4.75C3.9337 4.75 3.87011 4.77634 3.82322 4.82322C3.77634 4.87011 3.75 4.9337 3.75 5V15C3.75 15.0663 3.77634 15.1299 3.82322 15.1768C3.87011 15.2237 3.9337 15.25 4 15.25H20C20.0663 15.25 20.1299 15.2237 20.1768 15.1768C20.2237 15.1299 20.25 15.0663 20.25 15V5C20.25 4.93369 20.2237 4.87011 20.1768 4.82322C20.1299 4.77634 20.0663 4.75 20 4.75H4ZM2.76256 3.76256C3.09075 3.43437 3.53587 3.25 4 3.25H20C20.4641 3.25 20.9092 3.43437 21.2374 3.76256C21.5656 4.09075 21.75 4.53587 21.75 5V15C21.75 15.4641 21.5656 15.9092 21.2374 16.2374C20.9092 16.5656 20.4641 16.75 20 16.75H4C3.53587 16.75 3.09075 16.5656 2.76256 16.2374C2.43437 15.9092 2.25 15.4641 2.25 15V5C2.25 4.53587 2.43437 4.09075 2.76256 3.76256Z" fill="#160F29" />
          <path fillRule="evenodd" clipRule="evenodd" d="M6.25 20C6.25 19.5858 6.58579 19.25 7 19.25H17C17.4142 19.25 17.75 19.5858 17.75 20C17.75 20.4142 17.4142 20.75 17 20.75H7C6.58579 20.75 6.25 20.4142 6.25 20Z" fill="#160F29" />
          <path fillRule="evenodd" clipRule="evenodd" d="M9 15.25C9.41421 15.25 9.75 15.5858 9.75 16V20C9.75 20.4142 9.41421 20.75 9 20.75C8.58579 20.75 8.25 20.4142 8.25 20V16C8.25 15.5858 8.58579 15.25 9 15.25Z" fill="#160F29" />
          <path fillRule="evenodd" clipRule="evenodd" d="M15 15.25C15.4142 15.25 15.75 15.5858 15.75 16V20C15.75 20.4142 15.4142 20.75 15 20.75C14.5858 20.75 14.25 20.4142 14.25 20V16C14.25 15.5858 14.5858 15.25 15 15.25Z" fill="#160F29" />
        </svg>
        <span className={s.buttonText}>System theme</span>
      </button>
    </div>
  )
}

export { ThemePicker }